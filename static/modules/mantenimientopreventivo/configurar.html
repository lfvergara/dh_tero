<link rel="stylesheet" type="text/css" href="{url_static}vendors/jquery-multi-select/css/multi-select.css" />
<div class="col-lg-12">
  <ul class="breadcrumb">
    <li><a href="#"><i class="fa fa-home"></i> HOME</a></li>
    <li><a href="{url_app}/mantenimientopreventivo/panel">Panel Mantenimientos Preventivos</a></li>
  </ul>
</div>
<div class="col-lg-6">
  <section class="panel">
    <header class="panel-heading"> Mantenimiento Preventivo</header>
    <div class="list-group">
      <a class="list-group-item active" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Motivo</h4>
        <p class="list-group-item-text">{mantenimientopreventivo-motivo}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> N° EUCOP: {mantenimientopreventivo-numero_eucop}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-calendar"></i> Fecha y hora</h4>
        <p class="list-group-item-text">{mantenimientopreventivo-fecha_inicio} - Desde las {mantenimientopreventivo-hora_inicio} hasta las {mantenimientopreventivo-hora_fin}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Tarea</h4>
        <p class="list-group-item-text">{mantenimientopreventivo-descripcion}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-user"></i> Responsable EDELAR: {mantenimientopreventivo-responsable_edelar}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-user"></i> Responsable Contratista: {mantenimientopreventivo-responsable_contratista}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-building"></i> Institución: {mantenimientoinstitucion-denominacion}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Categoría: {mantenimientocategoria-denominacion}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Departamentos</h4>
        <p class="list-group-item-text">{mantenimientopreventivo-departamentos}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Sector</h4>
        <p class="list-group-item-text">{mantenimientoubicacion-sector}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Calles</h4>
        <p class="list-group-item-text">{mantenimientoubicacion-calles}</p>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Informe Prensa: {mantenimientopreventivo-informe}</h4>
      </a>
      <a class="list-group-item" href="javascript:;">
        <h4 class="list-group-item-heading"><i class="fa fa-cog"></i> Informe WEB: {mantenimientopreventivo-aprobado}</h4>
      </a>
    </div>
  </section>
</div>
<div class="col-lg-6">
  <section class="panel">
    <header class="panel-heading"> 
      Listado de Distribuidores
      <span class="tools pull-right">
        <button type="button" class="btn btn-danger btn-xs" onclick="traerDistribuidores();"><i class="fa fa-plus-circle"></i> Agregar</button>
      </span>
    </header>  
    <div class="list-group">  
      {lst_btn_distribuidor}
    </div>
  </section>
  <section class="panel">
    <header class="panel-heading"> 
      Listado de Cetas
      <span class="tools pull-right">
        <button type="button" class="btn btn-danger btn-xs" onclick="traerCetas();"><i class="fa fa-plus-circle"></i> Agregar</button>
      </span>
    </header>  
    <div class="list-group">  
      {lst_btn_ceta}
    </div>
  </section>
</div>
<div class="col-lg-6" id="div_agregar_distribuidor" style="display: none;">
  <section class="panel panel">
    <header class="panel-heading"><i class="fa fa-plus-square"></i>&nbsp;&nbsp; Agregar Distribuidores</header>
    <div class="panel-body">
      <div class="row">
        <div class="col-lg-12">
          <div class=" form">
            <form class="form" id="formulario_guardar" method="post" action="{url_app}/mantenimientopreventivo/guardar_distribuidor">
              <label>Seleccionar distribuidor</label>
              <select name="distribuidor[]" class="multi-select" multiple="" id="distribuidor" required>
                {multi_slt_distribuidor}
              </select>
              <div class="form-group col-lg-12" style="margin-top: 2%;" align="right">
                  <input type="hidden" name="mantenimientopreventivo_id" value="{mantenimientopreventivo-mantenimientopreventivo_id}">
                  <button class="btn btn-danger" type="submit"><i class="fa fa-save"></i> Agregar </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<div class="col-lg-6" id="div_agregar_ceta" style="display: none;">
  <section class="panel panel">
    <header class="panel-heading"><i class="fa fa-plus-square"></i>&nbsp;&nbsp; Agregar Ceta</header>
    <div class="panel-body">
      <div class="row">
        <div class="col-lg-12">
          <div class=" form">
            <form class="form" id="formulario_guardar" method="post" action="{url_app}/mantenimientopreventivo/guardar_ceta">
              <label>Seleccionar ceta</label>
              <select name="ceta[]" class="multi-select" multiple="" id="ceta">
                {multi_slt_ceta}
              </select>
              <div class="form-group col-lg-12" style="margin-top: 2%;" align="right">
                  <input type="hidden" name="mantenimientopreventivo_id" value="{mantenimientopreventivo-mantenimientopreventivo_id}">
                  <button class="btn btn-danger" type="submit"><i class="fa fa-save"></i> Agregar </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<script>
  function traerDistribuidores() {
    document.getElementById("div_agregar_distribuidor").style.display = 'block';
    document.getElementById("div_agregar_ceta").style.display = 'none';    
  }

  function traerCetas() {
    document.getElementById("div_agregar_distribuidor").style.display = 'none';
    document.getElementById("div_agregar_ceta").style.display = 'block';    
  }
</script>
<script type="text/javascript" src="{url_static}vendors/jquery-multi-select/js/jquery.multi-select.js"></script>
<script type="text/javascript" src="{url_static}vendors/jquery-multi-select/js/jquery.quicksearch.js"></script>
<script type="text/javascript" charset="utf-8">
  $('#distribuidor').multiSelect({
    selectableHeader: "<input type='text' class='form-control search-input' autocomplete='off' placeholder='Buscar distribuidor'>",
    selectionHeader: "<input type='text' class='form-control search-input' autocomplete='off' placeholder='Buscar distribuidor'>",
    afterInit: function (ms) {
      var that = this,
      $selectableSearch = that.$selectableUl.prev(),
      $selectionSearch = that.$selectionUl.prev(),
      selectableSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selectable:not(.ms-selected)',
      selectionSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selection.ms-selected';

      that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
        .on('keydown', function (e) {
          if (e.which === 40) {
            that.$selectableUl.focus();
            return false;
          }
        });

        that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
          .on('keydown', function (e) {
            if (e.which == 40) {
              that.$selectionUl.focus();
              return false;
            }
          });
      },
      afterSelect: function () {
        this.qs1.cache();
        this.qs2.cache();
      },
      afterDeselect: function () {
        this.qs1.cache();
        this.qs2.cache();
      }
    });
</script>
<script type="text/javascript" charset="utf-8">
  $('#ceta').multiSelect({
    selectableHeader: "<input type='text' class='form-control search-input' autocomplete='off' placeholder='Buscar ceta'>",
    selectionHeader: "<input type='text' class='form-control search-input' autocomplete='off' placeholder='Buscar ceta'>",
    afterInit: function (ms) {
      var that = this,
      $selectableSearch = that.$selectableUl.prev(),
      $selectionSearch = that.$selectionUl.prev(),
      selectableSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selectable:not(.ms-selected)',
      selectionSearchString = '#' + that.$container.attr('id') + ' .ms-elem-selection.ms-selected';

      that.qs1 = $selectableSearch.quicksearch(selectableSearchString)
        .on('keydown', function (e) {
          if (e.which === 40) {
            that.$selectableUl.focus();
            return false;
          }
        });

        that.qs2 = $selectionSearch.quicksearch(selectionSearchString)
          .on('keydown', function (e) {
            if (e.which == 40) {
              that.$selectionUl.focus();
              return false;
            }
          });
      },
      afterSelect: function () {
        this.qs1.cache();
        this.qs2.cache();
      },
      afterDeselect: function () {
        this.qs1.cache();
        this.qs2.cache();
      }
    });
</script>